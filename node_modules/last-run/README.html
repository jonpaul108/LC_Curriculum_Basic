<p>&lt;p align=&quot;center&quot;&gt;
&lt;a href=&quot;http://gulpjs.com&quot;&gt;
&lt;img height=&quot;257&quot; width=&quot;114&quot; src=&quot;https://raw.githubusercontent.com/gulpjs/artwork/master/gulp-2x.png&quot;&gt;
&lt;/a&gt;
&lt;/p&gt;</p>
<h1>last-run</h1>
<p><a href="https://www.npmjs.com/package/last-run"><img src="http://img.shields.io/npm/v/last-run.svg" alt="NPM version"></a> <a href="https://www.npmjs.com/package/last-run"><img src="http://img.shields.io/npm/dm/last-run.svg" alt="Downloads"></a> <a href="https://travis-ci.org/gulpjs/last-run"><img src="http://img.shields.io/travis/gulpjs/last-run.svg?label=travis-ci" alt="Build Status"></a> <a href="https://ci.appveyor.com/project/gulpjs/last-run"><img src="https://img.shields.io/appveyor/ci/gulpjs/last-run.svg?label=appveyor" alt="AppVeyor Build Status"></a> <a href="https://coveralls.io/r/gulpjs/last-run"><img src="http://img.shields.io/coveralls/gulpjs/last-run/master.svg" alt="Coveralls Status"></a> <a href="https://gitter.im/gulpjs/gulp"><img src="https://badges.gitter.im/gulpjs/gulp.svg" alt="Gitter chat"></a></p>
<p>Capture and retrieve the last time a function was run.</p>
<h2>Usage</h2>
<pre><code class="language-js">var lastRun = require('last-run');

function myFunc(){}

myFunc();
// capture the run after (or before) calling the function
lastRun.capture(myFunc);

// retrieve the last run time
lastRun(myFunc);
//-&gt; outputs the Date.now() when capture was called
</code></pre>
<h2>API</h2>
<p><strong>Note: this module uses a WeakMap shim, and throws on non-extensible functions on platforms that
don't have a native WeakMap implementation</strong></p>
<h3>lastRun(fn, [timeResolution]) =&gt; [Timestamp]</h3>
<p>Takes a function (<code>fn</code>) and returns a timestamp of the last time the function was captured.</p>
<p>Returns undefined if the function has not been captured.</p>
<p>The timestamp is always given in millisecond but the time resolution can be reduced (rounded down).
The use case is to be able to compare a build time to a file time attribute.
On node v0.10 or with file system like HFS or FAT, <code>fs.stat</code> time attributes like <code>mtime</code> precision is one second.</p>
<p>Assuming <code>lastRun(fn)</code> returns 1426000001111, <code>lastRun(fn, 1000)</code> returns 1426000001000.</p>
<p>The default time resolution is 1000 on node v0.10, 0 on node 0.11+ and iojs.
More information at <a href="https://github.com/gulpjs/default-resolution"><code>default-resolution</code></a> and
<a href="https://github.com/gulpjs/undertaker/pull/17#issuecomment-82374512">undertaker PR #17</a>.</p>
<h3>lastRun.capture(fn, [timestamp])</h3>
<p>Takes a function (<code>fn</code>) and captures the current timestamp with <code>Date.now()</code>.
If passed the optional timestamp, captures that time instead of <code>Date.now()</code>.
The captured timestamp can then be retrieved using the <code>lastRun</code> function.</p>
<h3>lastRun.release(fn)</h3>
<p>Takes a function (<code>fn</code>) and removes the last run timestamp for it.</p>
<h2>License</h2>
<p>MIT</p>
