<p><a href="https://semaphoreci.com/medikoo-org/type"><img src="https://semaphoreci.com/api/v1/medikoo-org/type/branches/master/shields_badge.svg" alt="*nix build status"></a>
<a href="https://ci.appveyor.com/api/project/medikoo/type"><img src="https://ci.appveyor.com/api/projects/status/8nrtluuwsb5k9l8d?svg=true" alt="Windows build status"></a>
<a href="https://codecov.io/gh/medikoo/type"><img src="https://img.shields.io/codecov/c/github/medikoo/type.svg" alt="Tests coverage"></a>
<a href="https://www.npmjs.com/package/type"><img src="https://img.shields.io/npm/v/type.svg" alt="npm version"></a></p>
<h1>type</h1>
<h2>Runtime validation and processing of JavaScript types</h2>
<ul>
<li>Respects language nature and acknowledges its quirks</li>
<li>Allows coercion in restricted forms (rejects clearly invalid input, normalizes permissible type deviations)</li>
<li>No transpilation implied, written to work in all ECMAScript 3+ engines</li>
</ul>
<h3>Example usage</h3>
<p>Bulletproof input arguments normalization and validation:</p>
<pre><code class="language-javascript">const ensureString        = require('type/string/ensure')
    , ensureDate          = require('type/date/ensure')
    , ensureNaturalNumber = require('type/natural-number/ensure')
    , isObject            = require('type/object/is');

module.exports = (path, options = { min: 0 }) {
  path = ensureString(path, { errorMessage: &quot;%v is not a path&quot; });
  if (!isObject(options)) options = {};
  const min = ensureNaturalNumber(options.min, { default: 0 })
      , max = ensureNaturalNumber(options.max, { isOptional: true })
      , startTime = ensureDate(options.startTime, { isOptional: true });

  // ...logic
};
</code></pre>
<h3>Installation</h3>
<pre><code class="language-bash">npm install type
</code></pre>
<h2>Utilities</h2>
<p>Serves following kind of utilities:</p>
<h5><code>*/coerce</code></h5>
<p>Restricted coercion into primitive type. Returns coerced value or <code>null</code> if value is not coercible per rules.</p>
<h5><code>*/is</code></h5>
<p>Object type/kind confirmation, returns either <code>true</code> or <code>false</code>.</p>
<h5><code>*/ensure</code></h5>
<p>Value validation. Returns input value (in primitive cases possibly coerced) or if value doesn't meet the constraints throws <code>TypeError</code> .</p>
<p>Each <code>*/ensure</code> utility, accepts following options (eventually passed with second argument):</p>
<ul>
<li><code>isOptional</code> - Makes <code>null</code> or <code>undefined</code> accepted as valid value. In such case instead of <code>TypeError</code> being thrown, <code>null</code> is returned.</li>
<li><code>default</code> - A value to be returned if <code>null</code> or <code>undefined</code> is passed as an input value.</li>
<li><code>errorMessage</code> - Custom error message (<code>%v</code> can be used as a placeholder for input value)</li>
</ul>
<hr>
<h3>Value</h3>
<p><em>Value</em>, any value that's neither <code>null</code> nor <code>undefined</code> .</p>
<h4><code>value/is</code></h4>
<p>Confirms whether passed argument is a <em>value</em></p>
<pre><code class="language-javascript">const isValue = require(&quot;type/value/is&quot;);

isValue({}); // true
isValue(null); // false
</code></pre>
<h4><code>value/ensure</code></h4>
<p>Ensures if given argument is a <em>value</em>. If it's a value it is returned back, if not <code>TypeError</code> is thrown</p>
<pre><code class="language-javascript">const ensureValue = require(&quot;type/value/ensure&quot;);

const obj = {};

ensureValue(obj); // obj
ensureValue(null); // Thrown TypeError: Cannot use null
</code></pre>
<hr>
<h3>Object</h3>
<p><em>Object</em>, any non-primitive value</p>
<h4><code>object/is</code></h4>
<p>Confirms if passed value is an object</p>
<pre><code class="language-javascript">const isObject = require(&quot;type/object/is&quot;);

isObject({}); // true
isObject(true); // false
isObject(null); // false
</code></pre>
<h4><code>object/ensure</code></h4>
<p>If given argument is an object, it is returned back. Otherwise <code>TypeError</code> is thrown.</p>
<pre><code class="language-javascript">const ensureObject = require(&quot;type/object/ensure&quot;);

const obj = {};

ensureObject(obj); // obj
ensureString(null); // Thrown TypeError: null is not an object
</code></pre>
<hr>
<h3>String</h3>
<p><em>string</em> primitive</p>
<h4><code>string/coerce</code></h4>
<p>Restricted string coercion. Returns string presentation for every value that follows below constraints</p>
<ul>
<li>is implicitly coercible to string</li>
<li>is neither<code>null</code> nor <code>undefined</code></li>
<li>its <code>toString</code> method is not <code>Object.prototype.toString</code></li>
</ul>
<p>For all other values <code>null</code> is returned</p>
<pre><code class="language-javascript">const coerceToString = require(&quot;type/string/coerce&quot;);

coerceToString(12); // &quot;12&quot;
coerceToString(undefined); // null
</code></pre>
<h4><code>string/ensure</code></h4>
<p>If given argument is a string coercible value (via <a href="#stringcoerce"><code>string/coerce</code></a>) returns result string.
Otherwise <code>TypeError</code> is thrown.</p>
<pre><code class="language-javascript">const ensureString = require(&quot;type/string/ensure&quot;);

ensureString(12); // &quot;12&quot;
ensureString(null); // Thrown TypeError: null is not a string
</code></pre>
<hr>
<h3>Number</h3>
<p><em>number</em> primitive</p>
<h4><code>number/coerce</code></h4>
<p>Restricted number coercion. Returns number presentation for every value that follows below constraints</p>
<ul>
<li>is implicitly coercible to number</li>
<li>is neither <code>null</code> nor <code>undefined</code></li>
<li>is not <code>NaN</code> and doesn't coerce to <code>NaN</code></li>
</ul>
<p>For all other values <code>null</code> is returned</p>
<pre><code class="language-javascript">const coerceToNumber = require(&quot;type/number/coerce&quot;);

coerceToNumber(&quot;12&quot;); // 12
coerceToNumber({}); // null
coerceToNumber(null); // null
</code></pre>
<h4><code>number/ensure</code></h4>
<p>If given argument is a number coercible value (via <a href="#numbercoerce"><code>number/coerce</code></a>) returns result number.
Otherwise <code>TypeError</code> is thrown.</p>
<pre><code class="language-javascript">const ensureNumber = require(&quot;type/number/ensure&quot;);

ensureNumber(12); // &quot;12&quot;
ensureNumber(null); // Thrown TypeError: null is not a number
</code></pre>
<hr>
<h4>Finite Number</h4>
<p>Finite <em>number</em> primitive</p>
<h5><code>finite/coerce</code></h5>
<p>Follows <a href="#numbercoerce"><code>number/coerce</code></a> additionally rejecting <code>Infinity</code> and <code>-Infinity</code> values (<code>null</code> is returned if given values coerces to them)</p>
<pre><code class="language-javascript">const coerceToFinite = require(&quot;type/finite/coerce&quot;);

coerceToFinite(&quot;12&quot;); // 12
coerceToFinite(Infinity); // null
coerceToFinite(null); // null
</code></pre>
<h5><code>finite/ensure</code></h5>
<p>If given argument is a finite number coercible value (via <a href="#finitecoerce"><code>finite/coerce</code></a>) returns result number.
Otherwise <code>TypeError</code> is thrown.</p>
<pre><code class="language-javascript">const ensureFinite = require(&quot;type/finite/ensure&quot;);

ensureFinite(12); // &quot;12&quot;
ensureFinite(null); // Thrown TypeError: null is not a finite number
</code></pre>
<hr>
<h4>Integer Number</h4>
<p>Integer <em>number</em> primitive</p>
<h5><code>integer/coerce</code></h5>
<p>Follows <a href="#finitecoerce"><code>finite/coerce</code></a> additionally stripping decimal part from the number</p>
<pre><code class="language-javascript">const coerceToInteger = require(&quot;type/integer/coerce&quot;);

coerceToInteger(&quot;12.95&quot;); // 12
coerceToInteger(Infinity); // null
coerceToInteger(null); // null
</code></pre>
<h5><code>integer/ensure</code></h5>
<p>If given argument is an integer coercible value (via <a href="#integercoerce"><code>integer/coerce</code></a>) returns result number.
Otherwise <code>TypeError</code> is thrown.</p>
<pre><code class="language-javascript">const ensureInteger = require(&quot;type/integer/ensure&quot;);

ensureInteger(12.93); // &quot;12&quot;
ensureInteger(null); // Thrown TypeError: null is not an integer
</code></pre>
<hr>
<h4>Safe Integer Number</h4>
<p>Safe integer <em>number</em> primitive</p>
<h5><code>safe-integer/coerce</code></h5>
<p>Follows <a href="#integercoerce"><code>integer/coerce</code></a> but returns <code>null</code> in place of values which are beyond <code>Number.MIN_SAFE_INTEGER</code> and <code>Number.MAX_SAFE_INTEGER</code> range.</p>
<pre><code class="language-javascript">const coerceToSafeInteger = require(&quot;type/safe-integer/coerce&quot;);

coerceToInteger(&quot;12.95&quot;); // 12
coerceToInteger(9007199254740992); // null
coerceToInteger(null); // null
</code></pre>
<h5><code>safe-integer/ensure</code></h5>
<p>If given argument is a safe integer coercible value (via <a href="#safe-integercoerce"><code>safe-integer/coerce</code></a>) returns result number.
Otherwise <code>TypeError</code> is thrown.</p>
<pre><code class="language-javascript">const ensureSafeInteger = require(&quot;type/safe-integer/ensure&quot;);

ensureSafeInteger(12.93); // &quot;12&quot;
ensureSafeInteger(9007199254740992); // Thrown TypeError: null is not a safe integer
</code></pre>
<hr>
<h4>Natural Number</h4>
<p>Natural <em>number</em> primitive</p>
<h5><code>natural-number/coerce</code></h5>
<p>Follows <a href="#integercoerce"><code>integer/coerce</code></a> but returns <code>null</code> for values below <code>0</code></p>
<pre><code class="language-javascript">const coerceToNaturalNumber = require(&quot;type/natural-number/coerce&quot;);

coerceToNaturalNumber(&quot;12.95&quot;); // 12
coerceToNaturalNumber(-120); // null
coerceToNaturalNumber(null); // null
</code></pre>
<h5><code>natural-number/ensure</code></h5>
<p>If given argument is a natural number coercible value (via <a href="#natural-numbercoerce"><code>natural-number/coerce</code></a>) returns result number.
Otherwise <code>TypeError</code> is thrown.</p>
<pre><code class="language-javascript">const ensureNaturalNumber = require(&quot;type/natural-number/ensure&quot;);

ensureNaturalNumber(12.93); // &quot;12&quot;
ensureNaturalNumber(-230); // Thrown TypeError: null is not a natural number
</code></pre>
<hr>
<h3>Plain Object</h3>
<p>A <em>plain object</em></p>
<ul>
<li>Inherits directly from <code>Object.prototype</code> or <code>null</code></li>
<li>Is not a constructor's <code>prototype</code> property</li>
</ul>
<h4><code>plain-object/is</code></h4>
<p>Confirms if given object is a <em>plain object</em></p>
<pre><code class="language-javascript">const isPlainObject = require(&quot;type/plain-object/is&quot;);

isPlainObject({}); // true
isPlainObject(Object.create(null)); // true
isPlainObject([]); // false
</code></pre>
<h4><code>plain-object/ensure</code></h4>
<p>If given argument is a plain object it is returned back. Otherwise <code>TypeError</code> is thrown.</p>
<pre><code class="language-javascript">const ensurePlainObject = require(&quot;type/plain-object/ensure&quot;);

ensurePlainObject({}); // {}
ensureArray(&quot;foo&quot;); // Thrown TypeError: foo is not a plain object
</code></pre>
<hr>
<h3>Array</h3>
<p><em>Array</em> instance</p>
<h4><code>array/is</code></h4>
<p>Confirms if given object is a native array</p>
<pre><code class="language-javascript">const isArray = require(&quot;type/array/is&quot;);

isArray([]); // true
isArray({}); // false
isArray(&quot;foo&quot;); // false
</code></pre>
<h4><code>array/ensure</code></h4>
<p>If given argument is an array, it is returned back. Otherwise <code>TypeError</code> is thrown.</p>
<pre><code class="language-javascript">const ensureArray = require(&quot;type/array/ensure&quot;);

ensureArray([&quot;foo&quot;]); // [&quot;foo&quot;]
ensureArray(&quot;foo&quot;); // Thrown TypeError: foo is not an array
</code></pre>
<hr>
<h4>Array Like</h4>
<p><em>Array-like</em> value (any value with <code>length</code> property)</p>
<h4><code>array-like/is</code></h4>
<p>Restricted <em>array-like</em> confirmation. Returns true for every value that meets following contraints</p>
<ul>
<li>is an <em>object</em> (or with <code>allowString</code> option, a <em>string</em>)</li>
<li>is not a <em>function</em></li>
<li>Exposes <code>length</code> that meets <a href="#array-lengthcoerce"><code>array-length</code></a> constraints</li>
</ul>
<pre><code class="language-javascript">const isArrayLike = require(&quot;type/array-like/is&quot;);

isArrayLike([]); // true
isArrayLike({}); // false
isArrayLike({ length: 0 }); // true
isArrayLike(&quot;foo&quot;); // false
isArrayLike(&quot;foo&quot;, { allowString: true }); // true
</code></pre>
<h4><code>array-like/ensure</code></h4>
<p>If given argument is an <em>array-like</em>, it is returned back. Otherwise <code>TypeError</code> is thrown.</p>
<pre><code class="language-javascript">const ensureArrayLike = require(&quot;type/array-like/ensure&quot;);

ensureArrayLike({ length: 0 }); // { length: 0 }
ensureArrayLike(&quot;foo&quot;, { allowString: true }); // &quot;foo&quot;
ensureArrayLike({}); // Thrown TypeError: null is not an iterable
</code></pre>
<hr>
<h4>Array length</h4>
<p><em>number</em> primitive that conforms as valid <em>array length</em></p>
<h5><code>array-length/coerce</code></h5>
<p>Follows <a href="#safe-integercoerce"><code>safe-integer/coerce</code></a> but returns <code>null</code> in place of values which are below <code>0</code></p>
<pre><code class="language-javascript">const coerceToArrayLength = require(&quot;type/safe-integer/coerce&quot;);

coerceToArrayLength(&quot;12.95&quot;); // 12
coerceToArrayLength(9007199254740992); // null
coerceToArrayLength(null); // null
</code></pre>
<h5><code>array-length/ensure</code></h5>
<p>If given argument is an <em>array length</em> coercible value (via <a href="#array-lengthcoerce"><code>array-length/coerce</code></a>) returns result number.
Otherwise <code>TypeError</code> is thrown.</p>
<pre><code class="language-javascript">const ensureArrayLength = require(&quot;type/array-length/ensure&quot;);

ensureArrayLength(12.93); // &quot;12&quot;
ensureArrayLength(9007199254740992); // Thrown TypeError: null is not a valid array length
</code></pre>
<hr>
<h3>Iterable</h3>
<p>Value which implements <em>iterable</em> protocol</p>
<h4><code>iterable/is</code></h4>
<p>Confirms if given object is an <em>iterable</em> and is not a <em>string</em> (unless <code>allowString</code> option is passed)</p>
<pre><code class="language-javascript">const isIterable = require(&quot;type/iterable/is&quot;);

isIterable([]); // true
isIterable({}); // false
isIterable(&quot;foo&quot;); // false
isIterable(&quot;foo&quot;, { allowString: true }); // true
</code></pre>
<p>Supports also <code>denyEmpty</code> option</p>
<pre><code class="language-javascript">isIterable([], { denyEmpty: true }); // false
isIterable([&quot;foo&quot;], { denyEmpty: true }); // true
</code></pre>
<h4><code>iterable/ensure</code></h4>
<p>If given argument is an <em>iterable</em>, it is returned back. Otherwise <code>TypeError</code> is thrown.</p>
<pre><code class="language-javascript">const ensureIterable = require(&quot;type/iterable/ensure&quot;);

ensureIterable([]); // []
ensureIterable(&quot;foo&quot;, { allowString: true }); // &quot;foo&quot;
ensureIterable({}); // Thrown TypeError: null is not expected iterable
</code></pre>
<p>Additionally items can be coreced with <code>coerceItem</code> option. Note that in this case:</p>
<ul>
<li>A newly created array with coerced values is returned</li>
<li>Validation crashes if any of the items is not coercible</li>
</ul>
<pre><code class="language-javascript">ensureIterable(new Set([&quot;foo&quot;, 12])); // [&quot;foo&quot;, &quot;12&quot;]

ensureIterable(new Set([&quot;foo&quot;, {}])); // Thrown TypeError: Set({ &quot;foo&quot;, {} }) is not expected iterable
</code></pre>
<hr>
<h3>Date</h3>
<p><em>Date</em> instance</p>
<h4><code>date/is</code></h4>
<p>Confirms if given object is a native date, and is not an <em>Invalid Date</em></p>
<pre><code class="language-javascript">const isDate = require(&quot;type/date/is&quot;);

isDate(new Date()); // true
isDate(new Date(&quot;Invalid date&quot;)); // false
isDate(Date.now()); // false
isDate(&quot;foo&quot;); // false
</code></pre>
<h4><code>date/ensure</code></h4>
<p>If given argument is a date object, it is returned back. Otherwise <code>TypeError</code> is thrown.</p>
<pre><code class="language-javascript">const ensureDate = require(&quot;type/date/ensure&quot;);

const date = new Date();
ensureDate(date); // date
ensureDate(123123); // Thrown TypeError: 123123 is not a date object
</code></pre>
<hr>
<h3>Time value</h3>
<p><em>number</em> primitive which is a valid <em>time value</em> (as used internally in <em>Date</em> instances)</p>
<h4><code>time-value/coerce</code></h4>
<p>Follows <a href="#integercoerce"><code>integer/coerce</code></a> but returns <code>null</code> in place of values which go beyond 100 000 0000 days from unix epoch</p>
<pre><code class="language-javascript">const coerceToTimeValue = require(&quot;type/time-value/coerce&quot;);

coerceToTimeValue(12312312); // true
coerceToTimeValue(Number.MAX_SAFE_INTEGER); // false
coerceToTimeValue(&quot;foo&quot;); // false
</code></pre>
<h5><code>time-value/ensure</code></h5>
<p>If given argument is a <em>time value</em> coercible value (via <a href="#time-valuecoerce"><code>time-value/coerce</code></a>) returns result number.
Otherwise <code>TypeError</code> is thrown.</p>
<pre><code class="language-javascript">const ensureTimeValue = require(&quot;type/time-value/ensure&quot;);

ensureTimeValue(12.93); // &quot;12&quot;
ensureTimeValue(Number.MAX_SAFE_INTEGER); // Thrown TypeError: null is not a natural number
</code></pre>
<hr>
<h3>Function</h3>
<p><em>Function</em> instance</p>
<h4><code>function/is</code></h4>
<p>Confirms if given object is a native function</p>
<pre><code class="language-javascript">const isFunction = require(&quot;type/function/is&quot;);

isFunction(function () {}); // true
isFunction(() =&gt; {}); // true
isFunction(class {}); // true
isFunction(&quot;foo&quot;); // false
</code></pre>
<h4><code>function/ensure</code></h4>
<p>If given argument is a function object, it is returned back. Otherwise <code>TypeError</code> is thrown.</p>
<pre><code class="language-javascript">const ensureFunction = require(&quot;type/function/ensure&quot;);

const fn = function () {};
ensureFunction(fn); // fn
ensureFunction(/foo/); // Thrown TypeError: /foo/ is not a function
</code></pre>
<hr>
<h4>Plain Function</h4>
<p>A <em>Function</em> instance that is not a <em>Class</em></p>
<h5><code>plain-function/is</code></h5>
<p>Confirms if given object is a <em>plain function</em></p>
<pre><code class="language-javascript">const isPlainFunction = require(&quot;type/plain-function/is&quot;);

isPlainFunction(function () {}); // true
isPlainFunction(() =&gt; {}); // true
isPlainFunction(class {}); // false
isPlainFunction(&quot;foo&quot;); // false
</code></pre>
<h5><code>plain-function/ensure</code></h5>
<p>If given argument is a <em>plain function</em> object, it is returned back. Otherwise <code>TypeError</code> is thrown.</p>
<pre><code class="language-javascript">const ensurePlainFunction = require(&quot;type/function/ensure&quot;);

const fn = function () {};
ensurePlainFunction(fn); // fn
ensurePlainFunction(class {}); // Thrown TypeError: class is not a plain function
</code></pre>
<hr>
<h3>RegExp</h3>
<p><em>RegExp</em> instance</p>
<h4><code>reg-exp/is</code></h4>
<p>Confirms if given object is a native regular expression object</p>
<pre><code class="language-javascript">const isRegExp = require(&quot;type/reg-exp/is&quot;);

isRegExp(/foo/);
isRegExp({}); // false
isRegExp(&quot;foo&quot;); // false
</code></pre>
<h4><code>reg-exp/ensure</code></h4>
<p>If given argument is a regular expression object, it is returned back. Otherwise <code>TypeError</code> is thrown.</p>
<pre><code class="language-javascript">const ensureRegExp = require(&quot;type/reg-exp/ensure&quot;);

ensureRegExp(/foo/); // /foo/
ensureRegExp(&quot;foo&quot;); // Thrown TypeError: null is not a regular expression object
</code></pre>
<hr>
<h3>Promise</h3>
<p><em>Promise</em> instance</p>
<h4><code>promise/is</code></h4>
<p>Confirms if given object is a native <em>promise</em></p>
<pre><code class="language-javascript">const isPromise = require(&quot;type/promise/is&quot;);

isPromise(Promise.resolve()); // true
isPromise({ then: () =&gt; {} }); // false
isPromise({}); // false
</code></pre>
<h5><code>promise/ensure</code></h5>
<p>If given argument is a promise, it is returned back. Otherwise <code>TypeError</code> is thrown.</p>
<pre><code class="language-javascript">const ensurePromise = require(&quot;type/promise/ensure&quot;);

const promise = Promise.resolve();
ensurePromise(promise); // promise
eensurePromise({}); // Thrown TypeError: [object Object] is not a promise
</code></pre>
<hr>
<h4>Thenable</h4>
<p><em>Thenable</em> object (an object with <code>then</code> method)</p>
<h5><code>thenable/is</code></h5>
<p>Confirms if given object is a <em>thenable</em></p>
<pre><code class="language-javascript">const isThenable = require(&quot;type/thenable/is&quot;);

isThenable(Promise.resolve()); // true
isThenable({ then: () =&gt; {} }); // true
isThenable({}); // false
</code></pre>
<h5><code>thenable/ensure</code></h5>
<p>If given argument is a <em>thenable</em> object, it is returned back. Otherwise <code>TypeError</code> is thrown.</p>
<pre><code class="language-javascript">const ensureThenable = require(&quot;type/thenable/ensure&quot;);

const promise = Promise.resolve();
ensureThenable(promise); // promise
ensureThenable({}); // Thrown TypeError: [object Object] is not a thenable object
</code></pre>
<hr>
<h3>Error</h3>
<p><em>Error</em> instance</p>
<h4><code>error/is</code></h4>
<p>Confirms if given object is a native error object</p>
<pre><code class="language-javascript">const isError = require(&quot;type/error/is&quot;);

isError(new Error()); // true
isError({ message: &quot;Fake error&quot; }); // false
</code></pre>
<h4><code>error/ensure</code></h4>
<p>If given argument is an error object, it is returned back. Otherwise <code>TypeError</code> is thrown.</p>
<pre><code class="language-javascript">const ensureError = require(&quot;type/error/ensure&quot;);

const someError = new Error(&quot;Some error&quot;);
ensureError(someError); // someError
ensureError({ message: &quot;Fake error&quot; }); // Thrown TypeError: [object Object] is not an error object
</code></pre>
<hr>
<h3>Prototype</h3>
<p>Some constructor's <code>prototype</code> property</p>
<h4><code>prototype/is</code></h4>
<p>Confirms if given object serves as a <em>prototype</em> property</p>
<pre><code class="language-javascript">const isPrototype = require(&quot;type/prototype/is&quot;);

isPrototype({}); // false
isPrototype(Object.prototype); // true
isPrototype(Array.prototype); // true
</code></pre>
<h3>Tests</h3>
<pre><code>$ npm test
</code></pre>
