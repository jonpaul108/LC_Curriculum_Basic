<p>&lt;p align=&quot;center&quot;&gt;
&lt;a href=&quot;http://gulpjs.com&quot;&gt;
&lt;img height=&quot;257&quot; width=&quot;114&quot; src=&quot;https://raw.githubusercontent.com/gulpjs/artwork/master/gulp-2x.png&quot;&gt;
&lt;/a&gt;
&lt;/p&gt;</p>
<h1>glob-watcher</h1>
<p><a href="https://npmjs.com/package/glob-watcher"><img src="http://img.shields.io/npm/v/glob-watcher.svg" alt="NPM version"></a> <a href="https://npmjs.com/package/glob-watcher"><img src="http://img.shields.io/npm/dm/glob-watcher.svg" alt="Downloads"></a> <a href="https://travis-ci.org/gulpjs/glob-watcher"><img src="http://img.shields.io/travis/gulpjs/glob-watcher.svg?label=travis-ci" alt="Build Status"></a> <a href="https://ci.appveyor.com/project/gulpjs/glob-watcher"><img src="https://img.shields.io/appveyor/ci/gulpjs/glob-watcher.svg?label=appveyor" alt="AppVeyor Build Status"></a> <a href="https://coveralls.io/r/gulpjs/glob-watcher"><img src="http://img.shields.io/coveralls/gulpjs/glob-watcher/master.svg" alt="Coveralls Status"></a> <a href="https://gitter.im/gulpjs/gulp"><img src="https://badges.gitter.im/gulpjs/gulp.png" alt="Gitter chat"></a></p>
<p>Watch globs and execute a function upon change, with intelligent defaults for debouncing and queueing.</p>
<h2>Usage</h2>
<pre><code class="language-js">var watch = require('glob-watcher');

watch(['./*.js', '!./something.js'], function(done){
  // This function will be called each time a globbed file is changed
  // but is debounced with a 200ms delay (default) and queues subsequent calls

  // Make sure to signal async completion with the callback
  // or by returning a stream, promise, observable or child process
  done();

  // if you need access to the `path` or `stat` object, listen
  // for the `change` event (see below)

  // if you need to listen to specific events, use the returned
  // watcher instance (see below)
});

// Raw chokidar instance
var watcher = watch(['./*.js', '!./something.js']);

// Listen for the 'change' event to get `path`/`stat`
// No async completion available because this is the raw chokidar instance
watcher.on('change', function(path, stat) {
  // `path` is the path of the changed file
  // `stat` is an `fs.Stat` object (not always available)
});

// Listen for other events
// No async completion available because this is the raw chokidar instance
watcher.on('add', function(path, stat) {
  // `path` is the path of the changed file
  // `stat` is an `fs.Stat` object (not always available)
});
</code></pre>
<h2>API</h2>
<h3><code>watch(globs[, options][, fn])</code></h3>
<p>Takes a path string, an array of path strings, a <a href="https://github.com/micromatch/micromatch">glob</a> string or an array of <a href="https://github.com/micromatch/micromatch">glob</a> strings as <code>globs</code> to watch on the filesystem. Also optionally takes <code>options</code> to configure the watcher and a <code>fn</code> to execute when a file changes.</p>
<p><strong>Note: As of 5.0.0, globs must use <code>/</code> as the separator character because <code>\\</code> is reserved for escape sequences (as per the Bash 4.3 &amp; Micromatch specs). This means you can't use <code>path.join()</code> or <code>__dirname</code> in Windows environments. If you need to use <code>path.join()</code>, you can use <a href="https://www.npmjs.com/package/normalize-path">normalize-path</a> against your paths afterwards. If you need to use <code>__dirname</code>, you can set it as the <code>cwd</code> option that gets passed directly to <a href="https://github.com/paulmillr/chokidar">chokidar</a>. The <a href="https://github.com/micromatch/micromatch#backslashes">micromatch docs</a> contain more information about backslashes.</strong></p>
<p>Returns an instance of <a href="https://github.com/paulmillr/chokidar">chokidar</a>.</p>
<h4><code>fn([callback])</code></h4>
<p>If the <code>fn</code> is passed, it will be called when the watcher emits a <code>change</code>, <code>add</code> or <code>unlink</code> event. It is automatically debounced with a default delay of 200 milliseconds and subsequent calls will be queued and called upon completion. These defaults can be changed using the <code>options</code>.</p>
<p>The <code>fn</code> is passed a single argument, <code>callback</code>, which is a function that must be called when work in the <code>fn</code> is complete. Instead of calling the <code>callback</code> function, <a href="https://github.com/gulpjs/async-done#completion-and-error-resolution">async completion</a> can be signalled by:</p>
<ul>
<li>Returning a <code>Stream</code> or <code>EventEmitter</code></li>
<li>Returning a <code>Child Process</code></li>
<li>Returning a <code>Promise</code></li>
<li>Returning an <code>Observable</code></li>
</ul>
<p>Once async completion is signalled, if another run is queued, it will be executed.</p>
<h4><code>options</code></h4>
<h5><code>options.ignoreInitial</code></h5>
<p>If set to <code>false</code> the <code>fn</code> is called during <a href="https://github.com/paulmillr/chokidar">chokidar</a> instantiation as it discovers the file paths. Useful if it is desirable to trigger the <code>fn</code> during startup.</p>
<p><strong>Passed through to <a href="https://github.com/paulmillr/chokidar">chokidar</a>, but defaulted to <code>true</code> instead of <code>false</code>.</strong></p>
<p>Type: <code>Boolean</code></p>
<p>Default: <code>true</code></p>
<h5><code>options.delay</code></h5>
<p>The delay to wait before triggering the <code>fn</code>. Useful for waiting on many changes before doing the work on changed files, e.g. find-and-replace on many files.</p>
<p>Type: <code>Number</code></p>
<p>Default: <code>200</code> (milliseconds)</p>
<h5><code>options.queue</code></h5>
<p>Whether or not a file change should queue the <code>fn</code> execution if the <code>fn</code> is already running. Useful for a long running <code>fn</code>.</p>
<p>Type: <code>Boolean</code></p>
<p>Default: <code>true</code></p>
<h5><code>options.events</code></h5>
<p>An event name or array of event names to listen for. Useful if you only need to watch specific events.</p>
<p>Type: <code>String | Array&lt;String&gt;</code></p>
<p>Default: <code>[ 'add', 'change', 'unlink' ]</code></p>
<h5>other</h5>
<p>Options are passed directly to <a href="https://github.com/paulmillr/chokidar">chokidar</a>.</p>
<h2>License</h2>
<p>MIT</p>
